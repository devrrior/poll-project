{% extends 'base.html' %}
{% block title %}Edit Poll - Poll App{% endblock title %}
{% block content %}
<div class="container-fluid">
  <div class="d-flex justify-content-between m-5">
    <div>
      <h1 class="d-inline-block">{{ object.name }}</h1>
    </div>
    {% if object.status == "draft" %}
    <div>
      <a href="{% url 'question:new' %}" class="btn btn-primary">New Question</a>
      <a href="{% url 'poll:publish' pk=object.id %}?next={{ request.path | urlencode }}"
        class="btn btn-success">Publish Poll</a>
    </div>
    {% endif %}
  </div>
  <div class="px-4">
    {% for question in object.question_set.all %}
    <div class="card mb-4">
      <div class="card-header">
        Question #{{ forloop.counter }}
      </div>
      <div class="card-body">
        <h5 class="card-title">{{ question.question }}</h5>
        <p class="card-text">
        <ul>
          {% for answer in question.answer_set.all %}
          <li>{{ answer.answer }}</li>
          {% endfor %}
        </ul>
        </p>
        {% if object.status == "draft" %}
        <a href="{% url 'question:edit' question.id %}" class="btn btn-secondary">Edit</a>
        {% endif %}
      </div>
    </div>
    {% endfor %}
  </div>
</div>
{% endblock content %}
